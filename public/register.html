<!DOCTYPE html>
<html>
    <head>
        <title>Register</title>
    </head>
    <body>
        <h1>Just For Testing (For Now)</h1>
        <form id="register">
            <p>Name: </p>
            <input type="text" id="name" required>
            <p>Email: </p>
            <input type="email" id="email" required>
            <p>User Name: </p>
            <input type="text" id="username" required>
            <p>Password: </p>
            <input type="password" minlength="6" id="password" required>
            <p>Phone Number: </p>
            <input type="tel" id="phone" required>
            <br> <br>
            <button type="submit">Create User</button>
        </form>

        <script>
            async function createUser(userData) {
                console.log("userData");
                try {
                    const response = await fetch('http://localhost:3000/api/createUser', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(userData)
                    });

                    if (response.ok) {
                        const data = await response.json();
                        console.log(data);
                        alert('User created successfully!');
                        console.log("ran");
                    } else {
                        const errorData = await response.json();
                        console.error('Error creating user:', errorData.message);
                        alert('Error creating user: ' + errorData.message);
                    }
                    } catch (error) {
                        console.error('Network error:', error);
                        alert('Network error: ' + error.message);
                    }
                }

                // Form submission logic
                const register = document.getElementById('register');

                register.addEventListener('submit', (event) => {
                    event.preventDefault();
                    const userData = {
                        name: document.getElementById('name').value,
                        email: document.getElementById('email').value,
                        username: document.getElementById('username').value,
                        password: document.getElementById('password').value,
                        phone: document.getElementById('phone').value
                    };
                    
                    createUser(userData);
                });
        </script>
    </body>
</html>